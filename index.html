<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Depots form testing.</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

</head>

<body>
<div class="content-wrapper">

                      <form>
                          <div class="form-group row">
                            <label for="" class="col-sm-2 form-control-label">District</label>
                            <div class="col-sm-10">
                              <select class="form-control" id="select-district" placeholder="">
                              </select>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="" class="col-sm-2 form-control-label">Thana</label>
                            <div class="col-sm-10">
                              <select class="form-control" id="select-thana" placeholder="">
                              </select>
                            </div>
                          </div>
                          <div class="form-group row">
                            <label for="" class="col-sm-2 form-control-label">Post Code</label>
                            <div class="col-sm-10">
                              <select class="form-control" id="select-post-code" placeholder="">
                              </select>
                            </div>
                          </div>
                      </form>

      </div><!-- /.content-wrapper -->

      <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>

      <script>
          (function() {
               var url = "./dummy.json";
               //var $select = $('#myselect')
               $.getJSON(url)
               .done(function( data ) {
                    // $.each(data.items, function(i, item){
                    //   $select.append($('<option>').data[name]);
                    // });
                    $('#select-district').empty();
                    $.each(data, function(key, value) {
                      if(key == "Districts"){

                        $('#select-district').append('<option value=' + data["Districts"].id + '>' + data["Districts"].name + '</option>');

                        var selected = document.getElementById("select-district");

                        var selectedDistrict = selected.options[selected.selectedIndex].value;

                        $.each(data, function(key, value) {
                            if(key == "Districts"){
                              if(data["Districts"].id == selectedDistrict){
                                subDistricts = data["Districts"].Subdistricts;
                                for(i =0; i<subDistricts.length; i++){
                                  $.each(data, function(key, value) {
                                    if(key == "Subdistricts"){
                                      if(data["Subdistricts"].id == subDistricts[i]){
                                        $('#select-thana').append('<option value=' + data["Subdistricts"].id + '>' + data["Subdistricts"].name + '</option>');

                                        var selected = document.getElementById("select-thana")

                                        var selectedThana = selected.options[selected.selectedIndex].value;

                                        $.each(data, function(key, value) {
                                          if(key == "Districts"){
                                            if(data["Districts"].id == selectedDistrict){
                                              subDistricts = data["Districts"].Subdistricts;
                                              for(i =0; i<subDistricts.length; i++){
                                                $.each(data, function(key, value) {
                                                  if(key == "Subdistricts"){
                                                    for(i =0; i< data["Subdistricts"].Postcodes.length; i++ ){
                                                      $('#select-post-code').append('<option value=' + i + '>' + data["Subdistricts"].Postcodes[i] + '</option>');
                                                    }
                                                  }
                                                });
                                              }
                                            }
                                          }
                                        });
                                      }
                                    }
                                  });
                                }
                              }
                            }
                        });
                      }
                    });
                });
              })();

      </script>

</body>

</html>

